# load packages
library(tidyverse) # for data processing
library(lmerTest) # for mixed-effects modeling
library(readxl) # for reading .xlsx files
library(base64enc) # for converting recordings from base64 to audio files
library(stringdist) # for calculating edit distance on c-test responses
library(hunspell) # for spellchecking of c-test responses
library(patchwork) # for plotting
library(jsonlite) # for unpacking json
library(beepr) # for notifications
library(ggh4x) # for plotting
df <- read_csv('data/lfs/data.csv', col_types = cols(.default = 'c')) %>%
select(-audio_data)
df <- read_csv('data/data.csv', col_types = cols(.default = 'c')) %>%
select(-audio_data)
plot <- df %>%
group_by(study, group, task, participant) %>%
summarise() %>%
ungroup() %>%
group_by(study, group, task) %>%
summarise(n = n()) %>%
ungroup() %>%
mutate(task = as.factor(task), group = as.factor(group),
study = case_when(study == '210510_do' ~ 'ORC',
study == '210510_su' ~ 'SRC'))
ggplot(data = plot, aes(x = task, y = n, group = group, col = group, shape = group, label = n)) +
geom_line(lwd = 1) +
geom_point(size = 2) +
geom_text(size = 3, col = 'black', nudge_y = 1.5) +
theme_classic() +
scale_x_discrete(name='task', limits = c('language_survey', 'ept', 'sprt', 'english_ajt', 'korean_ajt', 'mandarin_ajt', 'ctest', 'exit_survey'),
labels = c('lbq', 'ept', 'spr', 'eajt', 'kajt', 'majt', 'ctest', 'exit')) +
scale_y_continuous(name='participants', limits=c(50, 100)) +
theme(text = element_text(size = 12),
legend.position = 'bottom') +
facet_wrap(~study)
ct <- read_csv('data/ctest_scored.csv', col_types = cols(.default = 'f', accuracy = 'l'))
ep <- df %>%
filter(task == 'ept') %>%
arrange(study, group, participant) %>%
select_if(function(x){!all(is.na(x))})
target <- ep %>%
filter(type != 'nontarget')
